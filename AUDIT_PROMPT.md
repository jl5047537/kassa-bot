# Промт для аудита кода Kassa Bot

## 1. ОБЩИЕ ТРЕБОВАНИЯ
- Провести полный аудит кода на соответствие TECHNICAL_SPECIFICATION.md
- Проверить соответствие зависимостей VERSIONS.md
- Использовать DEPENDENCIES_PROMPT.md как руководство по проверке зависимостей
- Все команды для PowerShell должны быть в правильном формате

## 2. ОБЛАСТИ ПРОВЕРКИ

### 2.1. Структура проекта
- Соответствие структуры директорий ТЗ
- Наличие всех необходимых файлов
- Корректность именования файлов и директорий
- Соответствие структуры базы данных миграциям

### 2.2. Telegram Бот
- Проверка всех команд (/start, /pay, /set_phone и т.д.)
- Корректность обработки ошибок
- Безопасность обработки пользовательских данных
- Работа с конфигурационными файлами

### 2.3. FastAPI Приложение
- Корректность эндпоинтов
- Валидация данных
- Обработка ошибок
- Безопасность API

### 2.4. Интеграция с TON
- Корректность работы с TON API
- Безопасность хранения API ключей
- Обработка транзакций
- Нормализация адресов

### 2.5. База данных
- Соответствие моделей миграциям
- Корректность связей между таблицами
- Оптимизация запросов
- Безопасность работы с данными

### 2.6. Безопасность
- Проверка уязвимостей в зависимостях
- Безопасность хранения конфиденциальных данных
- Защита от SQL-инъекций
- Валидация входных данных

## 3. ПРОЦЕСС АУДИТА

### 3.1. Подготовка
- Создать копию проекта для тестирования
- Подготовить тестовое окружение
- Настроить логирование аудита

### 3.2. Проверка
- Пошаговое выполнение всех функций
- Тестирование граничных случаев
- Проверка обработки ошибок
- Анализ производительности

### 3.3. Документирование
- Фиксация всех найденных проблем
- Приоритизация проблем:
  * Критические (блокирующие работу)
  * Важные (влияющие на функциональность)
  * Незначительные (косметические)
- Подробное описание каждой проблемы
- Предложение решений

## 4. ОТЧЕТНОСТЬ

### 4.1. Формат отчета
- Список всех проверенных компонентов
- Детальное описание каждой проблемы:
  * Описание проблемы
  * Приоритет
  * Возможные последствия
  * Предлагаемое решение
  * Оценка сложности исправления

### 4.2. Рекомендации
- Приоритетный порядок исправлений
- Предложения по оптимизации
- Рекомендации по безопасности
- Предложения по улучшению архитектуры

## 5. ПРОЦЕСС ИСПРАВЛЕНИЯ
- Не вносить изменения без явного одобрения
- Дожидаться решения по каждой проблеме
- Предоставлять варианты решений
- Документировать все изменения

## 6. ПРОВЕРКА ИСПРАВЛЕНИЙ
- Проверка каждого исправления
- Тестирование после изменений
- Обновление документации
- Проверка обратной совместимости 